<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="MBrasebin">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Utilisation conjointe SimPLU3D - OpenMOLE - SimPLU3D tutorial</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Utilisation conjointe SimPLU3D - OpenMOLE";
    var mkdocs_page_input_path = "openmole/intro.md";
    var mkdocs_page_url = "/simplu3D-tutorial/openmole/intro/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> SimPLU3D tutorial</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Accueil</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Premiers pas</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../begin/intro">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../begin/installation">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../begin/first_simulation">Première simulation</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../principe/intro">Principe</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Environnement géographique</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../envgeo/intro">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../envgeo/modelgeo">Modèle géographique détaillé</a>
                </li>
                <li class="">
                    
    <a class="" href="../../envgeo/integration">Processus d'intégration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../envgeo/integration-test">Tester l'intégration</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Générateur de formes</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../generator/intro">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../generator/principe">Principe de fonctionnement du générateur</a>
                </li>
                <li class="">
                    
    <a class="" href="../../generator/custom-generator">Paramétrer la génération de cuboids</a>
                </li>
                <li class="">
                    
    <a class="" href="../../custom-optimisation.md">Personnaliser la fonction d'optimisation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../generator/custom-shape">Personnaliser les formes utilisées</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Définition des contraintes morphologiques</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../rules/intro">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../rules/predicate/">Principe de fonctionnement du vérificateur</a>
                </li>
                <li class="">
                    
    <a class="" href="../../rules/formats">Formats de règles</a>
                </li>
                <li class="">
                    
    <a class="" href="../../rules/topologique">Définition de contraintes topologiques</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../export/">Exporter les résultats d'une simulation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../visitor/intro">Suivre l'évolution d'une simulation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href=".">Distribuer avec OpenMole</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../development/">Futurs développements</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../about/">À propos</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../bibliographie/">Réalisations et bibliographie</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">SimPLU3D tutorial</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Utilisation conjointe SimPLU3D - OpenMOLE</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/SimPLU3D/simplu3D-tutorial?query=root/path/docs/openmole/intro.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>OpenMOLE <a href="https://openmole.org/">(https://openmole.org/)</a> est une plate-forme dédiée à l'exploration de modèles de simulation. Cette plate-forme permet à travers la distribution de calculs de calibrer ou d'explorer de manière efficace l'espace de paramètres de modèles.</p>
<p>Ce couplage a été utilisé pour deux expérimentations : la production des simulations sur de grandes zones et pour la simulation de l'influence de paramètres de règles sur des formes bâties. Ces aspects sont présentés dans l'article suivant :</p>
<blockquote>
<p>Brasebin, M., P. Chapron, G. Chérel, M. Leclaire, I. Lokhat, J. Perret and R. Reuillon (2017) Apports des méthodes d’exploration et de distribution appliquées à la simulation des droits à bâtir, Actes du Colloque International de Géomatique et d'Analyse Spatiale (SAGEO 2017)</p>
</blockquote>
<h1 id="creation-dun-plug-in-openmole">Création d'un plug-in OpenMOLE.<a class="headerlink" href="#creation-dun-plug-in-openmole" title="Permanent link"></a></h1>
<p>Pour utiliser conjointement les deux projets, il est conseillé de créer un <a href="https://openmole.org/Plugin+Development.html">plug-in OpenMOLE</a>. Les différents couplages  déjà effectués se trouvent dans le projet <a href="https://github.com/SimPLU3D/simplu3D-openmole">SimPLU3D-OpenMole</a>.</p>
<p>Dans la suite, nous décrivons les étapes nécessaires à la production d'un tel plug-in.</p>
<h2 id="1-creation-du-projet-scala">1 Création du projet Scala<a class="headerlink" href="#1-creation-du-projet-scala" title="Permanent link"></a></h2>
<p>Le plus simple pour créer le projet Scala est de re-partir d'un exemple existant, en téléchargeant par exemple, le projet <a href="https://github.com/SimPLU3D/simplu3D-openmole">SimPLU3D-OpenMole</a>.</p>
<p>L'organisation du projet est classique, il y a un fichier build.sbt qui décrit la manière avec laquelle le projet est construit. Dans celui-là, il est déjà spécifié que l'on cherche à compiler un projet OSGI (manière de compiler un plugin OpenMOLE).</p>
<p>Pour pouvoir utiliser SimPLU3D depuis ce projet, il faut le spécifier dans les dépendances, cela se fait en définissant les resolvers (c'est à dire le dépôt dans lequel on peut trouver le .jar contenant le code)   :</p>
<pre><code class="scala">resolvers += Resolver.mavenLocal

resolvers += &quot;IGN snapshots&quot; at &quot;https://forge-cogit.ign.fr/nexus/content/repositories/snapshots/&quot;

resolvers += &quot;IGN releases&quot; at &quot;https://forge-cogit.ign.fr/nexus/content/repositories/releases/&quot;
</code></pre>

<p>et en spécifiant les dépendances à utiliser :</p>
<pre><code>libraryDependencies += &quot;fr.ign.cogit&quot; %% &quot;simplu3d&quot; % &quot;1.2-SNAPSHOT&quot;
</code></pre>

<h2 id="2-creation-du-code-scala-a-executer">2 Création du code Scala à exécuter<a class="headerlink" href="#2-creation-du-code-scala-a-executer" title="Permanent link"></a></h2>
<p>Il est tout d'abord nécessaire de préparer la tâche à exécuter en Java ou en Scala. Afin de pouvoir faciliter la distribution en ce qui concerne la gestion des fichiers envoyés et reçus pendant la distribution, nous conseillons au possible que le code ait la même signature que dans la méthode suivante (+ d'autres arguments)</p>
<pre><code class="scala">package simplu3dopenmoleplugin

import java.io.File
import fr.ign.cogit.simplu3d.experiments.openmole._

object DistribTask {
  def apply(folderIn: File, folderOut: File, paramFile: File, seed: Long): (Boolean, File) = {
    val res = IAUIDFTask.run(folderIn, folderOut, paramFile, seed);
    (res, folderOut)
  }

}
</code></pre>

<p>Ce qui est utile pour la suite est :
<em> 1/ de bien se rappeler du package scala (mot clef </em>package<em>) et de l'objet (mot clef </em>object<em>) ;
</em> 2/ qu'il faut définir une méthode apply qui prend en entrée les paramètres nécessaires au fonctionnement de la tâche et qui indique les sorties (il est possible d'avoir plusieurs objets en sortie avec scala, il suffit de définir les types en les séparant par des , comme ici  <em>(Boolean, File)</em> et la sortie est indiquée à la fin  (<em>res, folderOut)</em>'.</p>
<h2 id="3-production-du-bundle-osgi">3 Production du bundle OSGI<a class="headerlink" href="#3-production-du-bundle-osgi" title="Permanent link"></a></h2>
<p>A la racine, du projet, là où se trouve le <em>build.sbt</em>, il suffit d'exécuter :</p>
<pre><code> sbt osgiBundle -U
</code></pre>

<p>Un fichier .jar est alors produit dans "''target/scala''"</p>
<h2 id="4-definition-du-plan-dexperimentation-et-execution-dans-openmole">4 Définition du plan d'expérimentation et exécution dans OpenMole<a class="headerlink" href="#4-definition-du-plan-dexperimentation-et-execution-dans-openmole" title="Permanent link"></a></h2>
<p>Pour faire cela, je vous invite à regarder les tutoriels d'OpenMole pour apprendre à bien définir un script.</p>
<p>Une fois le plugin chargé, il est possible de l'utiliser dans la définition du workflow comme cela est expliqué en bas de <a href="[http://www.openmole.org/current/Documentation_Development_Plugins.html">cette page</a>.</p>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>IGNF 2018-2019</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/SimPLU3D/simplu3D-tutorial" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
